harvest_data:
  description: >
    Use PoliticalNewsTool with proper inputs:
      • query (string): political or macro keyword string
      • days_back (int): how far back to search (e.g., 2)
    Do not pass dictionaries — only literal values like:
      {"query": "inflation OR interest rates", "days_back": 2}

    Symbols provided:
      • ETFs: {etf_symbols}
      • Equities: {equity_symbols}
  expected_output: >
    Confirmation that the five JSON files above were written successfully.
  agent: data_harvester_agent

fundamental_analysis:
  description: >
    Compute valuation metrics (P/E, EV/EBITDA, PEG, P/B, dividend yield),
    benchmark against 1‑year and 5‑year medians plus sector peers, detect
    catalysts (earnings beats/misses, guidance changes, M&A). Estimate
    intraday price drift and output fundamental_summary.json.
    
    Symbols provided:
      • ETFs: {etf_symbols}
      • Equities: {equity_symbols}
  expected_output: >
    fundamental_summary.json with an array of objects holding symbol,
    fundamentals, predicted_trend, confidence and rationale.
  agent: valuation_engine_agent

technical_analysis:
  description: >
    Perform pattern and indicator scan on OHLC price history for each symbol
    (1m, 5m, 15m, 1h, daily). Detect patterns (double top/bottom, head &
    shoulders, flags, triangles) and indicator events (RSI, MACD, Bollinger,
    ATR). Adjust fundamental trends accordingly and emit
    technical_signals.json.
    
    Symbols provided:
      • ETFs: {etf_symbols}
      • Equities: {equity_symbols}
  expected_output: >
    technical_signals.json containing symbol, detected patterns, indicators,
    adjusted_trend and overall_signal_strength for each ticker.
  agent: pattern_scanner_agent

compose_report:
  description: >
    Generate the morning market briefing in blog‑style markdown. For each ticker
    passed (ETF or equity), generate a section with:
      • a heading: ## Equity Outlook - [symbol] or ## ETF Outlook - [symbol]
      • fundamental summary
      • technical indicator summary
      • trend and rationale
    
    Format must be in markdown with headers and bolded tickers. Include
    a timestamp footer and clear sections.

    Symbols provided:
      • ETFs: {etf_symbols}
      • Equities: {equity_symbols}
  expected_output: >
    A markdown-formatted report covering all input tickers, saved to
    daily_market_brief.md. Include summary per symbol in structured sections.
  output_file: daily_market_brief.md
  agent: report_composer_agent

compose_report_followup:
  description: >
    Continue or complete the market briefing report with any remaining tickers
    from the original list. Each section must follow the same structure:
      • Heading per symbol
      • Clear trend insight
      • Confidence and rationale
    
    Append output to existing daily_market_brief.md. Use clear markdown
    formatting and a timestamp footer.

    Symbols provided:
      • ETFs: {etf_symbols}
      • Equities: {equity_symbols}
  expected_output: >
    A markdown-formatted report covering all input tickers, saved to
    daily_market_brief.md. Include summary per symbol in structured sections.
  output_file: daily_market_brief.md
  agent: report_composer_agent