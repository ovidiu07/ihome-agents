harvest_data:
  description: >
    Use PoliticalNewsTool with proper inputs:
      • query (string): political or macro keyword string
      • days_back (int): how far back to search (e.g., 2)
    Do not pass dictionaries — only literal values like:
      {"query": "inflation OR interest rates", "days_back": 2}

    Symbols provided:
      • ETFs: {etf_symbols}
      • Equities: {equity_symbols}
  expected_output: >
    Confirmation that the five JSON files above were written successfully.
  agent: data_harvester_agent

fundamental_analysis:
  description: >
    For each symbol provided, compute valuation metrics (P/E, EV/EBITDA, PEG,
    P/B, dividend yield), benchmark against 1‑year and 5‑year medians and
    sector peers. Detect catalysts such as earnings surprises or guidance changes.
    Estimate intraday price drift individually.

    DO NOT summarize across symbols — each must be processed separately.
    
    Symbols provided:
      • ETFs: {etf_symbols}
      • Equities: {equity_symbols}
  expected_output: >
    fundamental_summary.json with an array of objects holding symbol,
    fundamentals, predicted_trend, confidence and rationale.
  agent: valuation_engine_agent

technical_analysis:
  description: >
    Analyze the last 5 candles per symbol using the full OHLCV data.
    For each entry, report:
    - Date
    - Open
    - High
    - Low
    - Close
    - Volume

    Use this format per symbol:
    SYMBOL_NAME (last 5 candles):
    - DATE: O=X H=Y L=Z C=W Vol=V
    ...

    ---
    {{ formatted_ohlc_data }}
  expected_output: >
    A report listing technical summary for each symbol using the last 5 days of OHLCV data.
    Format as Markdown per symbol, and include comments on detected trends or patterns.

compose_report:
  description: >
    For each ticker passed (ETF or equity), generate a dedicated markdown section with:
      • a heading: ## Equity Outlook - [symbol] or ## ETF Outlook - [symbol]
      • raw or lightly processed fundamental summary
      • raw or lightly processed technical indicators
      • final trend direction with confidence and rationale

    Each symbol must be reported separately. Do NOT summarize across multiple tickers.
    Avoid condensing sections or skipping data.
    
    Format must be in markdown with headers and bolded tickers. Include
    a timestamp footer and clear sections.

    Symbols provided:
      • ETFs: {etf_symbols}
      • Equities: {equity_symbols}
  expected_output: >
    A markdown-formatted report covering all input tickers, saved to
    daily_market_brief.md. Include summary per symbol in structured sections.
  output_file: daily_market_brief.md
  agent: report_composer_agent

compose_report_followup:
  description: >
    Continue the market briefing by adding one section per remaining ticker.
    Each section must include:
      • Heading per symbol
      • Technical + fundamental trend details
      • Confidence and rationale

    Sections must be added independently. Do NOT group or summarize across tickers.
    Maintain full structure and clarity.
    
    Append output to existing daily_market_brief.md. Use clear markdown
    formatting and a timestamp footer.

    Symbols provided:
      • ETFs: {etf_symbols}
      • Equities: {equity_symbols}
  expected_output: >
    A markdown-formatted report covering all input tickers, saved to
    daily_market_brief.md. Include summary per symbol in structured sections.
  output_file: daily_market_brief.md
  agent: report_composer_agent